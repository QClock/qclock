{"version":3,"sources":["webpack:///./src/components/ColorWheel/spectrum.module.scss","webpack:///./src/state/remote.js","webpack:///./src/state/index.js","webpack:///./node_modules/isomorphic-ws/browser.js","webpack:///./src/components/ColorWheel/Spectrum.js","webpack:///./src/components/ColorWheel/index.js","webpack:///./src/pages/colors.js","webpack:///./src/components/ColorWheel/colorwheel.module.scss"],"names":["module","exports","collectTimer","throttle","collectDelay","remoteAddress","window","url","this","getWsURL","socket","WebSocket","addEventListener","e","onUpdate","JSON","parse","data","addListener","func","send","state","readyState","stringify","upload","clearTimeout","setTimeout","location","host","context","useContext","Context","remote","remoteState","newState","Object","assign","connected","color","time","Date","datetime","dim","setState","action","type","arm","value","colorReducer","timeReducer","ws","MozWebSocket","global","self","hsla","index","a","size","Color","angle","componentStyle","transform","backgroundImage","className","css","style","colors","Array","fill","angles","map","length","spectrum","inner","key","ColorWheel","minute","hour","onChange","useState","minuteHue","setMinuteHue","hourHue","setHourHue","setMinute","hue","setHour","timewheel","dials","Dial","clsx","wheel","dot","Spectrum","defaultProps","IndexPage","useAppState","dispatch","title"],"mappings":"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","file":"component---src-pages-colors-js-cc1400a261ab3b375974.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"spectrum\":\"spectrum-module--spectrum--3nw_0\",\"inner\":\"spectrum-module--inner--2larT\",\"color\":\"spectrum-module--color--3kqiX\"};","import WebSocket  from 'isomorphic-ws'\n\nexport default new class {\n\n  collectTimer = 0\n  throttle = true\n  collectDelay = 5\n  remoteAddress = '192.168.0.4:8080'\n\n  constructor () {\n    if (typeof window == 'undefined') {\n      this.socket = null\n      return\n    }\n\n    const url = this.getWsURL()\n    this.socket = new WebSocket(url);\n\n    this.socket.addEventListener('message', (e) => {\n      if (this.onUpdate) {\n        this.onUpdate(JSON.parse(e.data))\n      }\n    })\n  }\n\n  addListener (func) {\n    this.onUpdate = func\n  }\n\n  send(state) {\n    if (this.socket.readyState === 1) {\n      this.socket.send(JSON.stringify(state))\n    }\n  }\n\n  upload (state) {\n    if (!this.throttle) {\n      this.send(state)\n      return\n    }\n\n    clearTimeout(this.collectTimer)\n\n    this.collectTimer = setTimeout(() => {\n      this.send(state)\n    }, this.collectDelay)\n  }\n\n  getWsURL () {\n    const {\n      host\n    } = window.location\n\n    return `ws://${host}`\n  }\n}()\n","\nimport { useContext } from 'react';\nimport Context from './context'\nimport remote from './remote'\n\nconst colorReducer = (state, action) => {\n  const color = Object.assign({}, state.color, {\n    [action.arm]: action.value\n  })\n  return Object.assign(\n    {},\n    state,\n    {\n      color\n    })\n}\n\nconst timeReducer = (state, action) => {\n  return Object.assign(\n    {},\n    state,\n    {\n      time: action.value\n    }\n  );\n}\n\nexport default () => {\n  const context = useContext(Context)\n\n  remote.addListener((remoteState) => {\n    const newState = Object.assign({}, context.state,\n      {\n        connected: true\n      },\n      {\n        color: remoteState.color\n      },\n      {\n        time: new Date(remoteState.datetime)\n      },\n      {\n        dim: remoteState.dim\n      }\n    )\n    context.setState(newState)\n  })\n\n  const dispatch = (action) => {\n    let newState;\n    switch(action.type) {\n      case 'color':\n        newState = colorReducer(context.state, action)\n        break;\n      case 'time':\n        newState = timeReducer(context.state, action)\n        break;\n      default:\n        newState = context.state;\n    }\n    context.setState(newState)\n    remote.upload(newState)\n  }\n\n  return [ context.state, dispatch ]\n}\n","// https://github.com/maxogden/websocket-stream/blob/48dc3ddf943e5ada668c31ccd94e9186f02fafbd/ws-fallback.js\nvar ws = null;\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket;\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket;\n} else if (typeof global !== 'undefined') {\n  ws = global.WebSocket || global.MozWebSocket;\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket;\n} else if (typeof self !== 'undefined') {\n  ws = self.WebSocket || self.MozWebSocket;\n}\n\nmodule.exports = ws;","import React from 'react';\nimport css from './spectrum.module.scss';\nimport clsx from 'clsx';\n\nconst hsla = (index, a, size) => `hsla(${index * (360 / size)} ,100%, 50%, ${a})`;\n\nconst Color = ({ index, angle, size }) => {\n\n\n  const componentStyle = {\n    transform: `translateY(-50%) rotate(${angle}deg)`,\n    backgroundImage: `linear-gradient(180deg, ${hsla(index, 0, size)}, ${hsla(index, 1, size)} 50%, ${hsla(index, 0, size)})`,\n  }\n\treturn (<div className={css.color} style={componentStyle} />);\n\n}\n\n\nexport default () => {\n  const colors = (new Array(64)).fill(0);\n  const angles = colors.map((a, index) => index * (360 / colors.length));\n\n\n  return (<div className={ css.spectrum }>\n      <div className={ css.inner }>\n        {angles.map((angle, index, angles) =>\n          <Color angle={angle} index={index} size={angles.length} key={`${angle}-${index}`} />\n        )}\n      </div>\n\n  </div>);\n}\n","import React, { useState } from \"react\"\nimport PropTypes from 'prop-types'\nimport clsx from 'clsx';\n\nimport Dial from '../Dial'\nimport Spectrum from './Spectrum'\nimport css from './colorwheel.module.scss';\n\nconst ColorWheel = ({ minute, hour, onChange }) => {\n  const saturation = 100;\n  const lightness = 50;\n\n  const [ minuteHue, setMinuteHue ] = useState(minute[0]);\n  const [ hourHue, setHourHue ] = useState(hour[0]);\n\n  const setMinute = (hue) => {\n    setMinuteHue(hue)\n    onChange('minute', [hue, minute[1], minute[2]])\n  }\n\n  const setHour = (hue) => {\n    setHourHue(hue)\n    onChange('hour', [hue, hour[1], hour[2]])\n  }\n\n  return (<div className={ css.timewheel }>\n    <div className={ css.dials }>\n      <Dial\n        value={ minuteHue }\n        onChange={ hue => setMinute(hue) }\n        className={ clsx(css.wheel, css.minute) }\n      >\n        <div className={ css.dot }></div>\n      </Dial>\n      <Dial\n        value={ hourHue }\n        onChange={ hue => setHour(hue) }\n        className={ clsx(css.wheel, css.hour) }\n      >\n        <div className={ css.dot }></div>\n      </Dial>\n    </div>\n    <Spectrum />\n  </div>)\n}\n\nColorWheel.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  minute: PropTypes.array,\n  hour: PropTypes.array,\n  className: PropTypes.string,\n}\n\nColorWheel.defaultProps = {\n  minute: [295, 50, 100],\n  hour: [ 205, 50, 100],\n  className: '',\n}\n\nexport default ColorWheel\n","import React from 'react'\nimport useAppState from '../state'\nimport Layout from '../components/layout'\nimport SEO from '../components/seo'\nimport ColorWheel from '../components/ColorWheel'\n\nconst IndexPage = () => {\n  const [ state, dispatch ] = useAppState();\n\n  return (<Layout>\n    <SEO title=\"QCLK\" />\n    <ColorWheel\n      minute={ state.color.minute }\n      hour={ state.color.hour }\n      onChange={ (arm, value) => {\n        dispatch({\n          type: 'color',\n          arm,\n          value,\n        })\n      }}\n    />\n  </Layout>)\n}\n\nexport default IndexPage\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"timewheel\":\"colorwheel-module--timewheel--3Sd9m\",\"dials\":\"colorwheel-module--dials--3POQ7\",\"wheel\":\"colorwheel-module--wheel--248ps\",\"dot\":\"colorwheel-module--dot--36ozD\",\"minute\":\"colorwheel-module--minute--14Tw8\",\"hour\":\"colorwheel-module--hour--3_SBP\",\"arc\":\"colorwheel-module--arc--2s29i\",\"timeinput\":\"colorwheel-module--timeinput--31jyS\"};"],"sourceRoot":""}